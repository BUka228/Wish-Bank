# Requirements Document

## Introduction

Данный документ описывает требования к расширенной квестовой системе с экономикой желаний и системой рангов. Система должна заменить текущую примитивную трехуровневую систему желаний на полноценную экономику с квестами, случайными событиями, общими желаниями, подарками и военными рангами. Цель - создать увлекательную и масштабируемую систему мотивации для пар.

## Requirements

### Requirement 1: Квестовая система

**User Story:** Как пользователь, я хочу создавать и выполнять квесты, чтобы получать награды и прогрессировать в системе

#### Acceptance Criteria

1. WHEN пользователь создает квест THEN система SHALL сохранить квест с описанием, наградой, сложностью и сроком выполнения
2. WHEN пользователь назначает квест партнеру THEN система SHALL отправить уведомление получателю
3. WHEN получатель квеста выполняет задание THEN только автор квеста SHALL иметь возможность засчитать выполнение
4. WHEN квест засчитывается как выполненный THEN система SHALL автоматически начислить награду получателю
5. WHEN квест не выполнен в срок THEN система SHALL автоматически перевести его в статус "просрочен"
6. WHEN пользователь просматривает квесты THEN система SHALL показывать активные, выполненные и просроченные квесты отдельно

### Requirement 2: Система случайных событий

**User Story:** Как пользователь, я хочу получать случайные события, которые может засчитать только мой партнер, чтобы добавить элемент неожиданности в систему

#### Acceptance Criteria

1. WHEN система генерирует случайное событие THEN оно SHALL появиться только у одного пользователя из пары
2. WHEN пользователь выполняет случайное событие THEN только его партнер SHALL иметь возможность засчитать выполнение
3. WHEN случайное событие засчитывается THEN система SHALL начислить награду и сгенерировать новое событие через случайный интервал
4. WHEN пользователь не может засчитать собственное случайное событие THEN система SHALL показывать соответствующее сообщение
5. WHEN случайное событие не выполнено в течение 24 часов THEN система SHALL заменить его на новое

### Requirement 3: Управление желаниями (выданными и полученными)

**User Story:** Как пользователь, я хочу видеть отдельно желания которые я дал и которые мне дали, чтобы лучше управлять своими обязательствами

#### Acceptance Criteria

1. WHEN пользователь открывает раздел желаний THEN система SHALL показывать две вкладки: "Мои желания" и "Желания для меня"
2. WHEN пользователь находится во вкладке "Мои желания" THEN система SHALL показывать только желания созданные этим пользователем
3. WHEN пользователь находится во вкладке "Желания для меня" THEN система SHALL показывать только желания назначенные этому пользователю
4. WHEN пользователь создает желание без указания получателя THEN система SHALL автоматически назначить его партнеру
5. WHEN желание выполняется THEN система SHALL обновить статус в обеих вкладках соответствующих пользователей

### Requirement 4: Классификация и фильтрация желаний

**User Story:** Как пользователь, я хочу классифицировать желания по категориям и фильтровать их, чтобы легко находить нужные

#### Acceptance Criteria

1. WHEN пользователь создает желание THEN система SHALL предложить выбрать категорию из предустановленного списка
2. WHEN пользователь просматривает желания THEN система SHALL показывать фильтры по категориям, статусу и типу
3. WHEN пользователь применяет фильтр THEN система SHALL показывать только желания соответствующие критериям
4. WHEN пользователь сбрасывает фильтры THEN система SHALL показывать все желания
5. WHEN система отображает желания THEN каждое желание SHALL иметь визуальную метку категории

### Requirement 5: Общие желания

**User Story:** Как пара, мы хотим создавать общие желания которые видны обоим и управляются совместно, чтобы планировать совместные активности

#### Acceptance Criteria

1. WHEN пользователь создает общее желание THEN система SHALL отправить запрос на подтверждение партнеру
2. WHEN партнер подтверждает общее желание THEN система SHALL создать желание видимое обоим пользователям
3. WHEN любой из партнеров хочет отредактировать общее желание THEN система SHALL требовать подтверждения от второго партнера
4. WHEN любой из партнеров хочет удалить общее желание THEN система SHALL требовать подтверждения от второго партнера
5. WHEN общее желание выполняется THEN любой из партнеров SHALL иметь возможность отметить его как выполненное
6. WHEN пользователь просматривает желания THEN общие желания SHALL отображаться в отдельной секции с особой маркировкой

### Requirement 6: Добавление исторических общих желаний

**User Story:** Как пара, мы хотим добавлять общие желания которые существовали до создания приложения, чтобы вести полную историю наших совместных целей

#### Acceptance Criteria

1. WHEN пользователь выбирает опцию "Добавить историческое желание" THEN система SHALL показать форму с дополнительным полем даты создания
2. WHEN пользователь указывает прошедшую дату THEN система SHALL принять ее как дату создания желания
3. WHEN создается историческое желание THEN система SHALL требовать подтверждения от партнера как для обычных общих желаний
4. WHEN историческое желание добавляется THEN система SHALL отображать его в хронологическом порядке согласно указанной дате
5. WHEN пользователь просматривает историю THEN исторические желания SHALL иметь специальную метку отличающую их от текущих

### Requirement 7: Система подарков желаний

**User Story:** Как пользователь, я хочу дарить желания партнеру без описания как простой жест внимания, чтобы выражать заботу спонтанно

#### Acceptance Criteria

1. WHEN пользователь выбирает "Подарить желание" THEN система SHALL показать быстрые кнопки для разных типов подарков
2. WHEN пользователь дарит желание THEN система SHALL немедленно начислить его партнеру без необходимости описания
3. WHEN желание подарено THEN система SHALL отправить уведомление получателю с информацией о дарителе
4. WHEN пользователь просматривает историю THEN подаренные желания SHALL отображаться с меткой "подарок"
5. WHEN система учитывает подарки THEN они SHALL засчитываться в общую статистику и влиять на ранги

### Requirement 8: Новая экономическая система

**User Story:** Как пользователь, я хочу участвовать в реалистичной экономике желаний с квотами и ограничениями, чтобы система была сбалансированной и интересной

#### Acceptance Criteria

1. WHEN пользователь дарит желания THEN система SHALL учитывать дневные, недельные и месячные квоты
2. WHEN квота исчерпана THEN система SHALL показывать сообщение о лимите и время до обновления
3. WHEN наступает новый период THEN система SHALL автоматически обновить доступные квоты
4. WHEN пользователь выполняет квесты или события THEN система SHALL начислять экономические очки влияющие на квоты
5. WHEN пользователь имеет высокий ранг THEN система SHALL предоставлять увеличенные квоты и бонусы
6. WHEN система рассчитывает экономику THEN она SHALL учитывать активность, выполненные задания и взаимодействие между партнерами

### Requirement 9: Система военных рангов

**User Story:** Как пользователь, я хочу прогрессировать через систему военных рангов основанную на активности в квестах и экономике, чтобы иметь долгосрочную мотивацию

#### Acceptance Criteria

1. WHEN пользователь регистрируется THEN система SHALL присвоить начальный ранг "Рядовой"
2. WHEN пользователь выполняет квесты и активности THEN система SHALL начислять очки опыта для повышения ранга
3. WHEN накоплено достаточно опыта THEN система SHALL автоматически повысить ранг пользователя
4. WHEN ранг повышается THEN система SHALL отправить поздравительное уведомление и показать новые привилегии
5. WHEN пользователь имеет высокий ранг THEN система SHALL предоставлять дополнительные возможности и бонусы
6. WHEN система отображает профиль THEN ранг SHALL быть виден с соответствующими знаками отличия

### Requirement 10: Масштабируемость системы

**User Story:** Как разработчик, я хочу чтобы система была готова к добавлению новых функций, чтобы легко расширять приложение в будущем

#### Acceptance Criteria

1. WHEN добавляются новые типы активностей THEN система SHALL поддерживать их без изменения основной архитектуры
2. WHEN вводятся новые типы наград THEN система SHALL интегрировать их в существующую экономику
3. WHEN создаются новые категории контента THEN система SHALL автоматически включать их в фильтрацию и поиск
4. WHEN расширяется система рангов THEN новые ранги SHALL легко добавляться с настраиваемыми привилегиями
5. WHEN интегрируются внешние системы THEN архитектура SHALL поддерживать подключение через стандартные API